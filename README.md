# SoundBot
A Discord bot that provides a self-hosted soundboard.

Credits to https://github.com/Radlad-io/Soundbot for the original implementation.

## How to use
When the bot is active, type `/sb` in Discord to bring up the soundboard.

Currently, sounds must be manually added as .mp3, .ogg, or .webm files to `Soundbot/assets/sounds/`. The sound filenames will be displayed in the soundboard.

## Pre-setup
1. Retrieve the IDs of the server and voice channel that you want your bot to connect to:
   1. In Discord, go to Settings > Advanced and turn on Developer Mode
   2. Right click the server name and click `Copy Server ID` - note this down somewhere
   3. Right click the voice channel name and click `Copy Channel ID` - note this down somewhere
2. Create a new Discord bot in [Discord's developer portal](https://discord.com/developers/applications)
     1. Create a new application, give it any name
     2. Navigate to the General Information settings and make note of the Application ID
     3. Navigate to the OAuth2 settings
     4. Check the following scopes:
        - applications.commands
        - bot
     5. Check the following bot permissions:
        - Send Messages
        - Connect
        - Speak
     6. Copy the generated URL, paste it in your browser, and follow the resulting instructions
     7. Go back to the developer portal and navigate to the Bot settings
     8. Click `Reset Token` and make note of the generated value - this is needed later

## Setup - Docker Compose
1. Create a new directory and copy `compose.yml` into it. Create a `config` directory and a `sounds` directory here too.
2. In the `config` directory, create a new file named `config.json` with the following:
```
{
  "token": <the token generated by Discord>,
  "clientId": <the application ID of your bot>,
  "guildId": <the ID of the server that the bot will join>,
  "channelId": <the ID of the voice channel that the bot will join>,
  "maxNumSounds": <up to you, but 50 is recommended>
}

```
3. Add any sound files you'd like in the `sounds` directory.
4. Run `sudo docker compose up`

## Setup - Source
1. Install NodeJS, NPM, and FFmpeg
2. Clone the repo, `cd` into the repo root directory, then run `npm install`
3. Create `config.json` in the `config` directory of the repo with the same contents as listed in the Docker Compose setup section.
6. Deploy the bot command using `npm run deploy`
7. Run the bot with `npm start`

`CTRL+C` will shut down the bot. It will be immediately disconnected from the configured voice channel upon exit, if connected.
